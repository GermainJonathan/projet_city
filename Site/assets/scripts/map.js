var mymap = L.map('mapid').setView([45.758399, 4.832487], 15);
L.tileLayer('http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {
    attribution: '<a href="https://www.openstreetmap.org/">OpenStreetMap</a>',
    maxZoom: 18,
    zoomControl: false
}).addTo(mymap);
const states = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "stroke": "#555555",
        "stroke-width": 1,
        "stroke-opacity": 0.5,
        "fill": "#07a32b",
        "fill-opacity": 0.5
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              4.8194146156311035,
              45.74876458246976
            ],
            [
              4.828035235404968,
              45.74517649246196
            ],
            [
              4.828450977802277,
              45.74568374297084
            ],
            [
              4.828872084617615,
              45.74608429915635
            ],
            [
              4.829167127609253,
              45.746411854648485
            ],
            [
              4.829429984092712,
              45.7467787145178
            ],
            [
              4.829564094543456,
              45.74696027182661
            ],
            [
              4.8300522565841675,
              45.74749558169149
            ],
            [
              4.8303526639938354,
              45.74784558921216
            ],
            [
              4.830594062805176,
              45.74813570073427
            ],
            [
              4.830789864063263,
              45.74836217384227
            ],
            [
              4.830843508243561,
              45.748332227037736
            ],
            [
              4.83124315738678,
              45.74880014402289
            ],
            [
              4.8313263058662415,
              45.74906030416991
            ],
            [
              4.831833243370056,
              45.74970602015824
            ],
            [
              4.831953942775726,
              45.74987446657884
            ],
            [
              4.832106828689575,
              45.75010093263203
            ],
            [
              4.833351373672485,
              45.75190888486669
            ],
            [
              4.834059476852417,
              45.75294197413493
            ],
            [
              4.8344457149505615,
              45.753451025581775
            ],
            [
              4.835054576396942,
              45.75431752527029
            ],
            [
              4.835051894187926,
              45.754369926547895
            ],
            [
              4.835314750671387,
              45.75470117634277
            ],
            [
              4.832836389541626,
              45.75532249833878
            ],
            [
              4.831066131591796,
              45.75602615586017
            ],
            [
              4.830594062805176,
              45.755329984103774
            ],
            [
              4.826801419258118,
              45.75689822973106
            ],
            [
              4.826197922229767,
              45.756329324716916
            ],
            [
              4.826036989688873,
              45.75611972667069
            ],
            [
              4.825977981090546,
              45.75591012783725
            ],
            [
              4.8259323835372925,
              45.75590825641554
            ],
            [
              4.82562929391861,
              45.75510353926809
            ],
            [
              4.825436174869537,
              45.754579531166314
            ],
            [
              4.8249614238739005,
              45.75374297946346
            ],
            [
              4.824564456939697,
              45.75300934885771
            ],
            [
              4.823899269104004,
              45.75234308413517
            ],
            [
              4.823024868965149,
              45.7513885899149
            ],
            [
              4.823196530342102,
              45.75130249747678
            ],
            [
              4.822547435760498,
              45.75081214236214
            ],
            [
              4.821404814720153,
              45.750037297635515
            ],
            [
              4.820948839187622,
              45.74977152715998
            ],
            [
              4.820911288261413,
              45.74979211505895
            ],
            [
              4.820090532302856,
              45.749223137601746
            ],
            [
              4.8194146156311035,
              45.74876458246976
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "stroke": "#555555",
        "stroke-width": 1,
        "stroke-opacity": 0,
        "fill": "#aa0004",
        "fill-opacity": 0.5
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              4.830921292304992,
              45.76138189651119
            ],
            [
              4.830889105796814,
              45.76129956197131
            ],
            [
              4.830693304538727,
              45.76082426475243
            ],
            [
              4.830551147460937,
              45.76064836633
            ],
            [
              4.829880595207214,
              45.75991669779225
            ],
            [
              4.8293736577034,
              45.75933846701975
            ],
            [
              4.829244911670685,
              45.75918501965978
            ],
            [
              4.828821122646332,
              45.758780814838076
            ],
            [
              4.828008413314819,
              45.758004209393874
            ],
            [
              4.827976226806641,
              45.75801918020339
            ],
            [
              4.826798737049103,
              45.75689822973106
            ],
            [
              4.83059138059616,
              45.755333726985896
            ],
            [
              4.831063449382782,
              45.756024284442354
            ],
            [
              4.832839071750641,
              45.755324369780126
            ],
            [
              4.835314750671387,
              45.75470304780496
            ],
            [
              4.83598530292511,
              45.75559572811091
            ],
            [
              4.83622133731842,
              45.75563689960445
            ],
            [
              4.836516380310059,
              45.75603738436571
            ],
            [
              4.836441278457642,
              45.7561796119071
            ],
            [
              4.836961627006531,
              45.756991799079266
            ],
            [
              4.837111830711365,
              45.75700677016042
            ],
            [
              4.837262034416199,
              45.75725753517267
            ],
            [
              4.837256669998169,
              45.757309933689584
            ],
            [
              4.8371922969818115,
              45.75738478862845
            ],
            [
              4.8374927043914795,
              45.758148303268875
            ],
            [
              4.837868213653564,
              45.75927484255584
            ],
            [
              4.837954044342041,
              45.7593721505301
            ],
            [
              4.83822762966156,
              45.760423814346545
            ],
            [
              4.837884306907654,
              45.76045001212453
            ],
            [
              4.837825298309326,
              45.760543575516856
            ],
            [
              4.837664365768433,
              45.76063713875229
            ],
            [
              4.837256669998169,
              45.76064836633
            ],
            [
              4.834043383598328,
              45.7607307018308
            ],
            [
              4.833356738090515,
              45.76079058211873
            ],
            [
              4.833324551582336,
              45.760835492292486
            ],
            [
              4.830921292304992,
              45.76138189651119
            ]
          ]
        ]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "stroke": "#555555",
        "stroke-width": 2,
        "stroke-opacity": 1,
        "fill": "#1f638b",
        "fill-opacity": 0.5
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              4.829869866371155,
              45.76672215462632
            ],
            [
              4.82998788356781,
              45.76656311438066
            ],
            [
              4.829979836940765,
              45.76655001692844
            ],
            [
              4.830146133899689,
              45.766400331542
            ],
            [
              4.830140769481658,
              45.76638162084048
            ],
            [
              4.830202460289001,
              45.76635355477638
            ],
            [
              4.830258786678314,
              45.76635355477638
            ],
            [
              4.830403625965118,
              45.766173931631855
            ],
            [
              4.8311492800712585,
              45.765230900633796
            ],
            [
              4.83122706413269,
              45.76506250056376
            ],
            [
              4.831256568431854,
              45.76484732195667
            ],
            [
              4.831261932849884,
              45.764531101454104
            ],
            [
              4.831320941448212,
              45.76341215297528
            ],
            [
              4.8313263058662415,
              45.763167029157934
            ],
            [
              4.831291437149047,
              45.76276659556706
            ],
            [
              4.8312243819236755,
              45.762339962223805
            ],
            [
              4.830923974514008,
              45.761383767749315
            ],
            [
              4.833316504955292,
              45.760835492292486
            ],
            [
              4.83335942029953,
              45.76079058211873
            ],
            [
              4.834046065807342,
              45.76072883057079
            ],
            [
              4.837664365768433,
              45.76063713875229
            ],
            [
              4.837825298309326,
              45.7605454467831
            ],
            [
              4.837889671325684,
              45.760451883393905
            ],
            [
              4.83822762966156,
              45.76042568561681
            ],
            [
              4.838345646858215,
              45.76083923480535
            ],
            [
              4.838318824768066,
              45.7610375876271
            ],
            [
              4.838528037071228,
              45.761685036269796
            ],
            [
              4.838603138923645,
              45.7626318696006
            ],
            [
              4.838683605194092,
              45.762770337950364
            ],
            [
              4.838656783103943,
              45.7643084362378
            ],
            [
              4.838619232177734,
              45.76440199315962
            ],
            [
              4.838533401489258,
              45.76533755374858
            ],
            [
              4.838608503341674,
              45.76538620247007
            ],
            [
              4.838587045669555,
              45.765595765708355
            ],
            [
              4.8384904861450195,
              45.765603250095154
            ],
            [
              4.838436841964722,
              45.76727598535466
            ],
            [
              4.83846366405487,
              45.767526704214134
            ],
            [
              4.838404655456543,
              45.76865305414212
            ],
            [
              4.837369322776794,
              45.76861563424397
            ],
            [
              4.835953116416931,
              45.76840608235052
            ],
            [
              4.834504723548889,
              45.76850711639744
            ],
            [
              4.834215044975281,
              45.76825265992939
            ],
            [
              4.8330241441726685,
              45.76817407755023
            ],
            [
              4.8322248458862305,
              45.768147883399244
            ],
            [
              4.831355810165405,
              45.76815162542157
            ],
            [
              4.831602573394775,
              45.767425668391404
            ],
            [
              4.830197095870972,
              45.76699532857817
            ],
            [
              4.829869866371155,
              45.76672215462632
            ]
          ]
        ]
      }
    }
  ]
};
function highlightFeature(e) {
    var layer = e.target;

    layer.setStyle({
        weight: 5,
        color: '#666',
        dashArray: '',
        fillOpacity: 0.7
    });

    if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
        layer.bringToFront();
    }
}
function resetHighlight(e) {
    geojson.resetStyle(e.target);
}
function zoomToFeature(e) {
    mymap.fitBounds(e.target.getBounds());
}
function onEachFeature(feature, layer) {
    layer.on({
        mouseover: highlightFeature,
        mouseout: resetHighlight,
        click: zoomToFeature
    });
}
L.geoJson(states, {
    onEachFeature: onEachFeature
}).addTo(mymap);
var LeafIcon = L.Icon.extend({
    options: {
        shadowUrl: 'leaf-shadow.png',
        iconSize:     [28, 37],
        shadowSize:   [0, 0],
        iconAnchor:   [0, 0],
        shadowAnchor: [0, 0],
        popupAnchor:  [19, -3]
    }
});
var fourchette = new LeafIcon({iconUrl: 'utensils-solid.png'});
const marker = L.marker([45.756331, 4.835529], {icon: fourchette}).bindPopup("Restaurant Sud<br> <a href='https://www.brasseries-bocuse.com/'>brasseries-bocuse</a>");
var shelterMarkers = new L.FeatureGroup();

shelterMarkers.addLayer(marker);

mymap.on('zoomend', function() {
    console.log(mymap.getZoom());
    if (mymap.getZoom() < 17) {
            mymap.removeLayer(shelterMarkers);
    }
    else {
            mymap.addLayer(shelterMarkers);
    }
});